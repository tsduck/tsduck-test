
Monitor SCTE 35 splice information

Usage: tsp -P splicemonitor [options]

Options:

  --alarm-command 'command'
      Command to run when a splice event is outside the nominal range as
      specified by other --min and --max options. The command receives seven
      additional parameters:

      1. A human-readable message, the same as logged by the plugin.
      2. The PID of the splice command.
      3. The event id.
      4. The string "in" or "out" for splice in / splice out command.
      5. The adjusted PTS value in the splice command.
      6. Pre-roll time in milliseconds.
      7. Number of occurences of the command before the event.

  -a
  --all-commands
      Same as --display-commands but display all SCTE-35 splice information
      commands. This is equivalent to --select-commands 0-255. By default, only
      display splice insert commands.

  -d
  --display-commands
      Display the content of SCTE-35 splice insert commands. By default, only
      log a short event description.

  --except-label label1[-label2]
      Invoke this plugin only for packets without any of the specified labels.
      Other packets are transparently passed to the next plugin, without going
      through this one. Several --except-label options may be specified. See
      also option --only-label. This is a generic option which is defined in
      all packet processing plugins.

  --help
      Display this help text.

  --influx value
      Send to an InfluxDB server all events of the specified types. See all
      other --influx-* options for more details. The default is 'none', meaning
      no connection to an InfluxDB server. Use 'all' to specify all types of
      events. Several options --influx are allowed.
      The 'value' must be one of "all", "cancelled", "immediate", "none",
      "occurred", "signalled".

  --influx-active-config value
      Config name to use in the InfluxDB CLI configurations file. By default,
      use the environment variable INFLUX_ACTIVE_CONFIG, then look for the
      active configuration in the configuration file, or the first
      configuration if none is marked as active.

  --influx-bucket name
      Name of the InfluxDB bucket. By default, use the environment variable
      INFLUX_BUCKET_NAME.

  --influx-bucket-id id
      Identifier of the InfluxDB bucket. The 'id' must be a 16-character value.
      By default, use the environment variable INFLUX_BUCKET_ID. Only one of
      --influx-bucket and --influx-bucket-id shall be specified.

  --influx-configs-path file-name
      Path to the InfluxDB CLI configurations file. By default, use the
      environment variable INFLUX_CONFIGS_PATH, then $HOME/.influxdbv2/configs.

  --influx-host-url name
      Host name or URL of the InfluxDB server. If a host name is used instead
      of a URL, http: is assumed. By default, use the environment variable
      INFLUX_HOST, then the InfluxDB CLI configuration file.

  --influx-local-time
      Interpret timestamps as local time, based on the current system
      configuration. By default, timestamps are interpreted as UTC time.

  --influx-org name
      Name of the InfluxDB organization. By default, use the environment
      variable INFLUX_ORG, then the InfluxDB CLI configuration file.

  --influx-org-id id
      Identifier of the InfluxDB organization. The 'id' must be a 16-character
      value. By default, use the environment variable INFLUX_ORG_ID. Only one
      of --influx-org and --influx-org-id shall be specified.

  --influx-pcr-based
      Use playout time based on PCR values. By default, the time is based on
      the wall-clock time (real time).

  --influx-queue-size count
      Maximum number of queued metrics between the plugin thread and the
      communication thread with InfluxDB. On off-line streams which are
      processed at high speed, increase this value if some metrics are lost.
      The default queue size is 10 messages.

  --influx-start-time year/month/day:hour:minute:second
      With --influx-pcr-based or --influx-timestamp-based, specify the initial
      date & time reference. By default, with --influx-pcr-based or
      --influx-timestamp-based, the activity starts at the first UTC time which
      is found in a DVB TDT or ATSC STT.

  --influx-tag name=value
      Add the specified tag, with the specified value, to all metrics which are
      sent to InfluxDB. This can be used to identify a source of metrics and
      filter it using InfluxDB queries. Several --influx-tag options may be
      specified.

  --influx-timestamp-based
      Use playout time based on timestamp values from the input plugin. When
      input timestamps are not available or not monotonic, fallback to
      --influx-pcr-based. By default, the time is based on the wall-clock time
      (real time).

  --influx-token string
      Token to authenticate InfluxDB requests. By default, use the environment
      variable INFLUX_TOKEN, then the InfluxDB CLI configuration file.

  -j
  --json
      Build a JSON description of splice events.

  --json-buffer-size value
      With --json-tcp or --json-udp, specify the network socket send buffer
      size in bytes.

  --json-line[='prefix']
      Build a JSON description of splice events. Report the JSON text as one
      single line in the message logger. The optional string parameter
      specifies a prefix to prepend on the log line before the JSON text to
      locate the appropriate line in the logs.

  --json-tcp ip-address:port
      Build a JSON description of splice events. Report the JSON text as one
      single line in a TCP connection. The address specifies an IP address or a
      host name that translates to an IP address. The port specifies the
      destination TCP port. By default, a new TCP connection is established
      each time a JSON message is produced. Be aware that a complete TCP
      connection cycle may introduce some latency in the processing. If latency
      is an issue, consider using --json-udp.

  --json-tcp-keep
      With --json-tcp, keep the TCP connection open for all JSON messages. By
      default, a new TCP connection is established each time a JSON message is
      produced.

  --json-udp ip-address:port
      Build a JSON description of splice events. Report the JSON text as one
      single line in a UDP datagram. The address specifies an IP address which
      can be either unicast or multicast. It can be also a host name that
      translates to an IP address. The port specifies the destination UDP port.
      Be aware that the size of UDP datagrams is limited by design to 64 kB. If
      larger JSON contents are expected, consider using --json-tcp.

  --json-udp-local ip-address
      With --json-udp, when the destination is a multicast address, specify the
      IP address of the outgoing local interface. It can be also a host name
      that translates to a local address.

  --json-udp-ttl value
      With --json-udp, specifies the TTL (Time-To-Live) socket option. The
      actual option is either "Unicast TTL" or "Multicast TTL", depending on
      the destination address. Remember that the default Multicast TTL is 1 on
      most systems.

  --max-pre-roll-time milliseconds
      Specify a maximum pre-roll time in milliseconds for splice commands. See
      option --alarm-command for non-nominal cases.

  --max-repetition value
      Specify a maximum number of repetitions for each splice command. See
      option --alarm-command for non-nominal cases.

  --meta-sections
      Add hexadecimal dump of each section in XML and JSON metadata.

  --min-pre-roll-time milliseconds
      Specify a minimum pre-roll time in milliseconds for splice commands. See
      option --alarm-command for non-nominal cases.

  --min-repetition value
      Specify a minimum number of repetitions for each splice command. See
      option --alarm-command for non-nominal cases.

  -n
  --no-adjustment
      When computing the anticipated pre-roll time at reception of a splice
      command, do not try to adjust the time using the distance between the
      last PTS and the splice command. By default, use the bitrate to adjust
      the supposed PTS of the splice command itself.

  --only-label label1[-label2]
      Invoke this plugin only for packets with any of the specified labels.
      Other packets are transparently passed to the next plugin, without going
      through this one. Several --only-label options may be specified. See also
      option --except-label. This is a generic option which is defined in all
      packet processing plugins.

  -o file-name
  --output-file file-name
      Specify an output text file. With --json, this will be a JSON file. By
      default, use the message logging system (or standard output with
      --display-commands).

  -i
  --packet-index
      Display the current TS packet index for each message or event.

  --select-commands value1[-value2]
      Same as --display-commands but display the specified SCTE-35 command
      types only. By default, only display splice insert commands. Several
      --select-commands can be specified.

  -s value
  --splice-pid value
      Specify one PID carrying SCTE-35 sections to monitor. By default, all
      SCTE-35 PID's are monitored.

  --tag 'string'
      Leading tag to be displayed with each message. Useful when the plugin is
      used several times in the same process.

  -t value
  --time-pid value
      Specify one video or audio PID containing PTS time stamps to link with
      SCTE-35 sections to monitor. By default, the PMT's are used to link
      between PTS PID's and SCTE-35 PID's.

  --timestamp
      Add a time stamp (current local time) inside each JSON structure (tables
      and events).

